其实吧凸包这个东西好像也没有想象中那么难呀ovo
（结果你调这题就调了一个下午嗯qwq）
咳咳

首先有一个结论，就是答案肯定在凸包上ovo
至于为啥。。额简单来说就是。。要让向量a在b上的映射最长的话那a的话肯定是a那个方向上面最长的那个也就是边界
所以就是在凸包上面了ovo
嗯。。严格证明的话还是写一下吧qwq（from ypl学长dalao orz）

对于点 $(x,y)$, $(z,w)$,点积为

$ans = x*z + y *w$

所以说

$w = -\frac{x}{y}*z + \frac{ans}{y}$

如果看几何意义的话就是：过点$(z,w)$的斜率为$-\frac{x}{y}$的直线，截距为$\frac{ans}{y}$

所以问题就相当于

对每个点做一条斜率为$-\frac{x}{y}$的直线

当$y>0$ 时，要使$\frac{ans}{y}$尽可能小，当$y<0$ 时，使$\frac{ans}{y}$尽可能大

所以还可以得到一个结论：

​	对于$y>0$，点积最大的点一定在上凸壳上，$y<0$则在下凸壳上

那接下来就是要求区间的凸包的问题了



区间询问，大胆想种线段树呀

然后就比较自然想到种棵树然后维护每个区间内所有节点的凸包嗯

然后查询的话，如果说每个区间每次加点都要重新求一次凸包。。嗯。。稳稳的t啊。。
所以说就发现其实。。添加的时候给走过的每个区间打上一个没有求过凸包的标记（因为新加了一个点嘛）
然后其实只有查询查到的区间的凸包是要用的，所以就只用在查到这个区间并且它被打了标记的时候才求凸包就好了

然后就是在凸包上面找答案了
这里又有一个结论
凸包上面的点按照极角来排序的话，那么我们求得的点积是单峰的

那就。。三分咯ovo

然后就十分愉快地搞定啦ovo

（所以说如果数学基础不好的话是硬伤是这样吗qwq）



一些需要注意的地方：

嗯。。排序的时候。。是先按照x排再按照y来排qwq。。。

