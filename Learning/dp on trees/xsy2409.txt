来自网上的比较好的解释

设dp[i]为从根到点i时间戳的期望值，对于结点v，设其父结点为u，
则到v的期望值分为两部分，
一部分是dp[u]+1即从父亲一步走过来，一部分是先去遍历父亲的其他子树，
设父亲共有k个子树，则每棵子树被访问的概率为1/k，且所有的访问顺序的个数为k!，
设某另一个子树w，则在所有访问序列中v在w前和w在v前的各占1/2，
同理u的所有非v子树都拥有这个性质。